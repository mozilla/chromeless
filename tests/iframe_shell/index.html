<html>
  <head>
    <title>WebbyFox</title>

  </head>
  <body onload="start()" >
   <p>
     This is an initial example, an experimentation to track 
     loading progress of an iframe. 
   </p>
   <script type="text/javascript">
     function onload() { 

        var fr = require("iframe-as-browser").bind(document.getElementById("browser"), document);

	/* We track progress! */
        document.getElementById("browser")
                .addEventListener("experimental-dom-progress",
                 function (e) {
                   document.getElementById("progress").innerHTML=e.percentage;
                   document.getElementById("dots").innerHTML+=".";
                 }
        ,false); 


	/* We track when the page is loaded! */
        document.getElementById("browser")
                .addEventListener("experimental-dom-stop",
                 function (e) {
                   document.getElementById("progress").innerHTML="AHhhhh this page is totally loaded!, just enjoy!";
                   document.getElementById("dots").innerHTML+=".";
                 }
        ,false); 

        document.getElementById("browser")
                .addEventListener("experimental-dom-document-load",
                 function (e) {
                   document.getElementById("dots").innerHTML+="loaded";
                 }
        ,false); 

        document.getElementById("browser").src="http://www.slashdot.org";
    } 

   </script>
   <div style="border:10px solid blue;padding:1em;">
   Loading a web page: <span id="progress"></span>% <span id="dots"></span>
   </div>
   <iframe id='browser' src="about:blank" width="100%" height="500" style="border:0" >
   </iframe>
  </body>
</html>
